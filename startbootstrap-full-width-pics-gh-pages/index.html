<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Forrest Gump - Main Events Map with Time Slider</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="css/styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster-src.js"></script>

    <style>
        #map {
            position: absolute;
            height: 90vh;
            width: 100%;
        }
    </style>
</head>

<body>
     <!-- Responsive navbar-->
     <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#!">Cinematic and National Memory: Mapping Forrest Gump</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="map"></div>

    <script>
        // Initialize map centered in the USA
        var map = L.map('map').setView([39.8283, -98.5795], 4);
        var baseLayer = L.tileLayer('https://api.maptiler.com/maps/bright-v2/{z}/{x}/{y}.png?key=9ZlnxkRt2oS8TwA1JdFu', {
            attribution: '&copy; MapTiler &copy; OpenStreetMap contributors'
        });
        
        // Custom marker icon
        var iconOptions = {
        iconUrl: src="images/pin.png", // Updated to use your custom icon
        iconSize: [55, 55]      // Size of the custom icon
        };
        var customIcon = L.icon(iconOptions);
        var markerOptions = { icon: customIcon };

        // Forrest Gump main event locations with timestamps
        var markers = [
        {
        position: [32.685779, -80.732960],
        popup: `
        <b>Greenbow, Alabama (filmed at Bluff Plantation)</b>
        <br>Run Forrest, Run!<br>
        <p>While Forrest and Jenny are walking home from school, bullies start chasing Forrest and as he tries to run away, leading to the iconic line from Jenny: Run Frrest, Run! His leg braces soon break and he runs faster and faster all the way through town. </p>
        <p>This is a pivotal scene in the film because it transitions from Forrest’s restricted past as a young boy to his open future as a young man. As the audience sees this physical transition into older Forrest, we see him running again from bullies but this time runs across a football field, prompting the coach to find him to join the team at the University of Alabama.</p>
        <img src="images/braces.avif" style="width: 150px">
        `,
        year: 1951
        }
        ];

        markers.push({
        position: [32.686955,-80.733013],
        popup: `
        <b>Greenbow, Alabama (filmed at Bluff Plantation)</b>
        <br>Elvis Presley Visits<br>
        <p>As a single mother, Mrs. Gump made their home into a bed and breakfast for money. One such guest was Elvis Presley. In one scene, Forrest is dancing while Elvis is playing the guitar. Because Forrest is wearing leg braces, the dancing is jolted and odd, however Forrest and Mrs. Gump later see Elvis impersonating Forrest’s dancing while singing “Hound Dog” on television.</p>
        <p>This scene is significant to connect Forrest’s story to America in the 1950s, especially to understanding cultural events like the emergence of rock and roll and icons like Elvis Presley.</p>
        <img src="images/Elvis.png" style="width: 150px">
        `,
        year: 1951
        });

        //Add your codes for the markers after this line
        markers.push({
        position: [32.076176, -81.088371],
        popup: `
        <b>Savannah, Georgia</b>
        <p>In 1981, at a bus stop bench in Savannah, Georgia, a man named Forrest Gump recounts his life story to strangers who sit next to him on a bench.</p>
        <img src="images/bench.jpg" style="width: 150px">
        `,
        year: 1981
        });
       
        markers.push({
        position: [28.3922,- 80.6077],
        popup: `
        <b>Cape Canaveral, Florida</b><br>
        Moon Landing <br>
        <p> The Moon landing by the Apollo 11 astronauts on July 20, 1969, is shown on a television screen in the movie while Forest is playing ping pong.</p> <p> The Space Race was a 20th century competition between the United States and the Soviet Union to achieve superiority in spaceflight. The race was a result of the Cold War. The Soviet Union launched Sputnik I, the world's first artificial satellite, on October 4, 1957. The United States landed humans on the moon on July 20, 1969 with Apollo 11 </p></p>
        <img src="images/Space Race.jpg" style="width: 150px">
        `,
        year: 1969
        });

        markers.push({
        position: [39.9042, 116.4074],
        popup: `
        <b>Beijing, China.</b><br>
        The Ping Pong Tour.<br>
        <p>Forrest Gump learned to play ping-pong while recovering from a gunshot wound in Vietnam. He quickly mastered the sport, fascinating his peers and eventually being sent to play in China on the All-American Ping-Pong Team.</p> <p> the scene is inspired by a real-life event that helped establish diplomatic relations between the United States and China. The US table tennis team visited several cities in China in 1971, including Beijing, Tianjin, Guangzhou, and Shanghai.The team's visit was part of a historic event known as "ping pong diplomacy". Ping-pong diplomacy was a key part of Richard Nixon's plan to establish detente with China. The event helped thaw relations between the two countries and was described by Time magazine as "The ping heard round the world".</p>
        <img src="images/ping pong.jpg" style="width: 150px">
        `,
        year: 1971
        });
       
        markers.push({
        position: [38.9072,-77.0369],
        popup: `
        <b>Washinton DC.</b><br>
        The White House.<br>
        <p> President Lyndon B. Johnson presents Forrest Gump with the Medal of Honor for his bravery and service in the Vietnam War.</p> <p>The movie's depiction of Forrest Gump receiving the Medal of Honor is loosely based on the real-life experience of Medal of Honor recipient Sammy L. Davis.In the movie, Tom Hanks' face was superimposed over Davis' body in the footage of President Johnson presenting Davis with the Medal of Honor.</p>
        <img src="images/medal.jpg" style="width: 150px">
        `,
        year: 1968
        });


        // Add markers with timestamps to map
        var eventsLayer = L.layerGroup();
        markers.forEach(function(event) {
            var marker = L.marker(event.position, markerOptions).bindPopup(event.popup);
            marker.options.year = event.year;  // Add a custom 'year' property to each marker
            eventsLayer.addLayer(marker);
        });

        // Add base layer and events layer
        baseLayer.addTo(map);
        eventsLayer.addTo(map);

        // Initialize the time slider
        var slider = document.getElementById('slider');
        noUiSlider.create(slider, {
        start: [1940],
        connect: true,
        range: { 'min': 1940, 'max': 1981 },
        step: 1,
        tooltips: true,
        format: {
        from: Number,
        to: function(value) { return Math.round(value); }
    }
});

        // Update markers based on slider year
        document.getElementById('slider').noUiSlider.on('update', function(values) {
            var currentYear = parseInt(values[0]);
            eventsLayer.clearLayers(); // Remove all markers
            markers.forEach(function(event) {
                if (event.year <= currentYear) {
                    var marker = L.marker(event.position, markerOptions).bindPopup(event.popup);
                    eventsLayer.addLayer(marker); // Add marker if its year is <= selected year
                }
            });
        });
        markers.forEach(markerData => {
        L.marker(markerData.position, markerOptions)
        .addTo(map)
        .bindPopup(markerData.popup);
        });
        

        // Layer controls for map
    </script>
</body>

</html>